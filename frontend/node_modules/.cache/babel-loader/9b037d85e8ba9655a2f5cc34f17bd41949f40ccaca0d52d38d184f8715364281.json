{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\discopony\\\\Desktop\\\\MSchool\\\\Notion automation\\\\Railway_Rent\\\\frontend\\\\src\\\\components\\\\RentalRow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport RentalRow from \"./RentalRow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RentalsTable = () => {\n  _s();\n  const [bookings, setBookings] = useState([]);\n\n  // Загружаем бронирования при монтировании\n  useEffect(() => {\n    fetch(\"/api/bookings\").then(res => res.json()).then(data => setBookings(data)).catch(error => console.error(\"Ошибка загрузки бронирований:\", error));\n  }, []);\n\n  // Функция для обновления записи\n  const handleUpdate = (id, updatedRental) => {\n    setBookings(prevBookings => prevBookings.map(booking => booking.id === id ? updatedRental : booking));\n\n    // Отправляем изменения на сервер\n    fetch(`/api/bookings/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(updatedRental)\n    }).then(res => res.json()).then(data => console.log(\"Бронирование обновлено:\", data)).catch(error => console.error(\"Ошибка обновления:\", error));\n  };\n\n  // Функция для добавления нового бронирования\n  const handleAddRental = () => {\n    const newRental = {\n      id: Date.now(),\n      // Временный ID, заменится на серверный\n      start_date: \"\",\n      end_date: \"\",\n      renter: \"\",\n      equipment: \"\",\n      issuer: \"\",\n      receiver: \"\",\n      status: \"Бронь\",\n      notes: \"\"\n    };\n    setBookings([...bookings, newRental]);\n\n    // Отправляем на сервер\n    fetch(\"/api/bookings\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newRental)\n    }).then(res => res.json()).then(data => {\n      setBookings(prev => prev.map(r => r.id === newRental.id ? {\n        ...r,\n        id: data.id\n      } : r));\n    }).catch(error => console.error(\"Ошибка при добавлении аренды:\", error));\n  };\n\n  // Функция для удаления бронирования\n  const handleDelete = id => {\n    setBookings(prev => prev.filter(booking => booking.id !== id));\n    fetch(`/api/bookings/${id}`, {\n      method: \"DELETE\"\n    }).then(res => res.json()).then(data => console.log(\"Бронирование удалено:\", data)).catch(error => console.error(\"Ошибка удаления:\", error));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddRental,\n      children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0430\\u0440\\u0435\\u043D\\u0434\\u0443\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0430\\u0440\\u0435\\u043D\\u0434\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0418\\u043C\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u041A\\u0442\\u043E \\u0432\\u044B\\u0434\\u0430\\u043B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u041A\\u0442\\u043E \\u043F\\u0440\\u0438\\u043D\\u044F\\u043B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u041E\\u0431\\u043E\\u0440\\u0443\\u0434\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u041A\\u043E\\u043D\\u0444\\u043B\\u0438\\u043A\\u0442\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: bookings.map(booking => /*#__PURE__*/_jsxDEV(RentalRow, {\n          booking: booking,\n          onUpdate: handleUpdate,\n          onDelete: handleDelete\n        }, booking.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n_s(RentalsTable, \"mhYuI94oNh8neuxZ6UayUTRC/Ns=\");\n_c = RentalsTable;\nexport default RentalsTable;\nvar _c;\n$RefreshReg$(_c, \"RentalsTable\");","map":{"version":3,"names":["React","useState","useEffect","RentalRow","jsxDEV","_jsxDEV","RentalsTable","_s","bookings","setBookings","fetch","then","res","json","data","catch","error","console","handleUpdate","id","updatedRental","prevBookings","map","booking","method","headers","body","JSON","stringify","log","handleAddRental","newRental","Date","now","start_date","end_date","renter","equipment","issuer","receiver","status","notes","prev","r","handleDelete","filter","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onUpdate","onDelete","_c","$RefreshReg$"],"sources":["C:/Users/discopony/Desktop/MSchool/Notion automation/Railway_Rent/frontend/src/components/RentalRow.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport RentalRow from \"./RentalRow\";\r\n\r\nconst RentalsTable = () => {\r\n    const [bookings, setBookings] = useState([]);\r\n\r\n    // Загружаем бронирования при монтировании\r\n    useEffect(() => {\r\n        fetch(\"/api/bookings\")\r\n            .then((res) => res.json())\r\n            .then((data) => setBookings(data))\r\n            .catch((error) => console.error(\"Ошибка загрузки бронирований:\", error));\r\n    }, []);\r\n\r\n    // Функция для обновления записи\r\n    const handleUpdate = (id, updatedRental) => {\r\n        setBookings((prevBookings) =>\r\n            prevBookings.map((booking) => (booking.id === id ? updatedRental : booking))\r\n        );\r\n\r\n        // Отправляем изменения на сервер\r\n        fetch(`/api/bookings/${id}`, {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(updatedRental),\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => console.log(\"Бронирование обновлено:\", data))\r\n        .catch((error) => console.error(\"Ошибка обновления:\", error));\r\n    };\r\n\r\n    // Функция для добавления нового бронирования\r\n    const handleAddRental = () => {\r\n        const newRental = {\r\n            id: Date.now(), // Временный ID, заменится на серверный\r\n            start_date: \"\",\r\n            end_date: \"\",\r\n            renter: \"\",\r\n            equipment: \"\",\r\n            issuer: \"\",\r\n            receiver: \"\",\r\n            status: \"Бронь\",\r\n            notes: \"\"\r\n        };\r\n\r\n        setBookings([...bookings, newRental]);\r\n\r\n        // Отправляем на сервер\r\n        fetch(\"/api/bookings\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(newRental),\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n            setBookings((prev) =>\r\n                prev.map((r) => (r.id === newRental.id ? { ...r, id: data.id } : r))\r\n            );\r\n        })\r\n        .catch((error) => console.error(\"Ошибка при добавлении аренды:\", error));\r\n    };\r\n\r\n    // Функция для удаления бронирования\r\n    const handleDelete = (id) => {\r\n        setBookings((prev) => prev.filter((booking) => booking.id !== id));\r\n\r\n        fetch(`/api/bookings/${id}`, {\r\n            method: \"DELETE\",\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => console.log(\"Бронирование удалено:\", data))\r\n        .catch((error) => console.error(\"Ошибка удаления:\", error));\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <button onClick={handleAddRental}>Добавить аренду</button>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Дата аренды</th>\r\n                        <th>Имя</th>\r\n                        <th>Кто выдал</th>\r\n                        <th>Кто принял</th>\r\n                        <th>Оборудование</th>\r\n                        <th>Примечания</th>\r\n                        <th>Статус</th>\r\n                        <th>Конфликты</th>\r\n                        <th>Удалить</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {bookings.map((booking) => (\r\n                        <RentalRow key={booking.id} booking={booking} onUpdate={handleUpdate} onDelete={handleDelete} />\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RentalsTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}